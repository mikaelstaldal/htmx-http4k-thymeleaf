<!--/*@thymesVar id="model" type="nu.staldal.htmxhttp4kthymeleaf.Contacts2"*/-->
<!DOCTYPE html>
<html lang="en" data-th-replace="~{layout.html :: layout(~{::title/content()}, ~{::style}, ~{::content})}">
<style data-th-fragment="style">
    tr.htmx-swapping {
        opacity: 0;
        transition: opacity 1s ease-out;
    }
</style>
<body>
<h2 data-th-fragment="title">htmx powered Contact.app</h2>
<div data-th-fragment="content" data-hx-boost="true">
    <div class="flash" data-th-if="${model.flash}" data-th-text="${model.flash}"/>

    <form action="/contacts2" method="get" class="tool-bar">
        <label for="search">Search Contacts </label>
        <input id="search" type="search" name="q"
               data-th-value="${model.q}?: ''"
               data-hx-get="/contacts2"
               data-hx-trigger="search, keyup delay:200ms changed"
               data-hx-target="tbody"
               data-hx-push-url="true"
               data-hx-indicator="next .htmx-indicator"
        />
        <img class="htmx-indicator"
             width="58" height="58"
             src="/img/spinning-circles.svg"
             alt="Request In Flight..."/>
        <input type="submit" value="Search"/>
    </form>

    <table>
        <thead>
        <tr>
            <th>First</th>
            <th>Last</th>
            <th>Phone</th>
            <th>Email</th>
            <th></th>
        </tr>
        </thead>
        <tbody data-th-insert="~{Contacts2Rows}"></tbody>
    </table>
    <p><a href="/contacts2/new">Add Contact</a> (<span data-hx-get="/contacts2/count" data-hx-trigger="revealed">
        <img class="htmx-indicator"
             width="58" height="58"
             alt="Request In Flight..."
             src="/img/spinning-circles.svg"/>
    </span> total Contacts)</p>
</div>
</body>
</html>
